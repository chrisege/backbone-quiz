var quizApp=quizApp||{};quizApp.QuestionView=Backbone.View.extend({tagName:"div",template:$("#questionTemplate").html(),initialize:function(){this.answerModel=new quizApp.Answer({items:this.model.get("secondColumn")});this.answerView=new quizApp.AnswerView({model:this.answerModel})},events:{sortupdate:"updateAnswer","click .checkResults":"checkResults","click .nextQuestion":"nextQuestion"},render:function(){var e=this;var t=_.template(this.template);this.answerView.render();this.$el.append(t(this.model.toJSON()));this.$(".secondColumn").append(this.answerView.el);this.$(".secondColumn ul").sortable();return this},updateAnswer:function(){var e=[];this.$el.find(".secondColumn li").each(function(){e.push($(this).html())});this.answerModel.set("shuffledItems",e)},checkResults:function(){var e=this.answerModel.score();this.model.set({score:e.score,possibleScore:e.key.length});this.$el.find(".secondColumn li").each(function(t,s){var n=e.key[t].toString();$(s).removeClass().addClass(n);if(n==="false"){$(s).append(" ("+e.items[t]+")")}});this.$el.find(".buttons button").each(function(){$(this).toggle()})},nextQuestion:function(){this.trigger("nextQuestion")},close:function(){this.unbind();this.undelegateEvents();this.stopListening();this.$el.empty()}});